{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useRef, useState } from \"react\";\n\nconst useCountDown = (duration, onFinish) => {\n  _s();\n\n  const startRef = useRef();\n  const requestRef = useRef();\n  const [remain, setRemain] = useState(duration * 1000);\n\n  const start = () => {\n    if (requestRef.current) {\n      cancelAnimationFrame(requestRef.current);\n    }\n\n    requestRef.current = requestAnimationFrame(animate);\n  };\n\n  const animate = time => {\n    if (startRef.current === undefined) startRef.current = time;\n    const elapsed = time - startRef.current;\n\n    if (elapsed < duration * 1000) {\n      setRemain(duration * 1000 - elapsed);\n      requestAnimationFrame(animate);\n    } else {\n      if (typeof onFinish === \"function\") onFinish();\n    }\n  };\n\n  return [start, remain / 1000];\n};\n\n_s(useCountDown, \"UYhfSuLFBm1cCGLKZ3uaYKBdAcg=\");\n\nexport default useCountDown;","map":{"version":3,"names":["useRef","useState","useCountDown","duration","onFinish","startRef","requestRef","remain","setRemain","start","current","cancelAnimationFrame","requestAnimationFrame","animate","time","undefined","elapsed"],"sources":["/Users/ghy/cs/program/draw-guess-together/src/hooks/useCountDown.ts"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\n\nconst useCountDown = (\n  duration: number,\n  onFinish?: () => void\n): [() => void, number] => {\n  const startRef = useRef<number>();\n  const requestRef = useRef<number>();\n  const [remain, setRemain] = useState<number>(duration * 1000);\n\n  const start = () => {\n    if (requestRef.current) {\n      cancelAnimationFrame(requestRef.current);\n    }\n    requestRef.current = requestAnimationFrame(animate);\n  };\n\n  const animate = (time: number) => {\n    if (startRef.current === undefined) startRef.current = time;\n    const elapsed = time - startRef.current;\n\n    if (elapsed < duration * 1000) {\n      setRemain(duration * 1000 - elapsed);\n      requestAnimationFrame(animate);\n    } else {\n      if (typeof onFinish === \"function\") onFinish();\n    }\n  };\n\n  return [start, remain / 1000];\n};\n\nexport default useCountDown;\n"],"mappings":";;AAAA,SAAgBA,MAAhB,EAAmCC,QAAnC,QAAmD,OAAnD;;AAEA,MAAMC,YAAY,GAAG,CACnBC,QADmB,EAEnBC,QAFmB,KAGM;EAAA;;EACzB,MAAMC,QAAQ,GAAGL,MAAM,EAAvB;EACA,MAAMM,UAAU,GAAGN,MAAM,EAAzB;EACA,MAAM,CAACO,MAAD,EAASC,SAAT,IAAsBP,QAAQ,CAASE,QAAQ,GAAG,IAApB,CAApC;;EAEA,MAAMM,KAAK,GAAG,MAAM;IAClB,IAAIH,UAAU,CAACI,OAAf,EAAwB;MACtBC,oBAAoB,CAACL,UAAU,CAACI,OAAZ,CAApB;IACD;;IACDJ,UAAU,CAACI,OAAX,GAAqBE,qBAAqB,CAACC,OAAD,CAA1C;EACD,CALD;;EAOA,MAAMA,OAAO,GAAIC,IAAD,IAAkB;IAChC,IAAIT,QAAQ,CAACK,OAAT,KAAqBK,SAAzB,EAAoCV,QAAQ,CAACK,OAAT,GAAmBI,IAAnB;IACpC,MAAME,OAAO,GAAGF,IAAI,GAAGT,QAAQ,CAACK,OAAhC;;IAEA,IAAIM,OAAO,GAAGb,QAAQ,GAAG,IAAzB,EAA+B;MAC7BK,SAAS,CAACL,QAAQ,GAAG,IAAX,GAAkBa,OAAnB,CAAT;MACAJ,qBAAqB,CAACC,OAAD,CAArB;IACD,CAHD,MAGO;MACL,IAAI,OAAOT,QAAP,KAAoB,UAAxB,EAAoCA,QAAQ;IAC7C;EACF,CAVD;;EAYA,OAAO,CAACK,KAAD,EAAQF,MAAM,GAAG,IAAjB,CAAP;AACD,CA5BD;;GAAML,Y;;AA8BN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}