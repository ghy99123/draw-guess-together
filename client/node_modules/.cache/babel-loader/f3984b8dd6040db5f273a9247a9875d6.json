{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useRef, useEffect, useState } from \"react\";\n\nconst useCountDown = (duration, step, onFinish) => {\n  _s();\n\n  const startRef = useRef();\n  const requestRef = useRef(null);\n  const [remain, setRemain] = useState(duration);\n\n  const start = () => {\n    if (requestRef.current) {\n      cancelAnimationFrame(requestRef.current);\n    }\n\n    requestRef.current = requestAnimationFrame(animate);\n  };\n\n  const animate = time => {\n    if (startRef.current === undefined) startRef.current = time;\n    const elapsed = time - startRef.current;\n\n    if (elapsed < duration) {\n      requestAnimationFrame(animate);\n\n      if (typeof step === \"function\") {}\n    } else {\n      if (typeof onFinish === \"function\") onFinish();\n    }\n  };\n\n  useEffect(() => {\n    requestAnimationFrame(animate);\n  }, []);\n};\n\n_s(useCountDown, \"5CBKBXr3buZgB8TvQ6rewPviQCQ=\");\n\nexport default useCountDown;","map":{"version":3,"names":["useRef","useEffect","useState","useCountDown","duration","step","onFinish","startRef","requestRef","remain","setRemain","start","current","cancelAnimationFrame","requestAnimationFrame","animate","time","undefined","elapsed"],"sources":["/Users/ghy/cs/program/draw-guess-together/src/hooks/useCountDown.ts"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\n\n\nconst useCountDown = (\n  duration: number,\n  step?: () => void,\n  onFinish?: () => void\n) => {\n  const startRef = useRef<number>();\n  const requestRef = useRef<number>(null);\n  const [remain, setRemain] = useState<number>(duration);\n\n  const start = () => {\n    if (requestRef.current) {\n      cancelAnimationFrame(requestRef.current)\n    }\n    requestRef.current = requestAnimationFrame(animate);\n  }\n\n  const animate = (time: number) => {\n    if (startRef.current === undefined) startRef.current = time;\n    const elapsed = time - startRef.current;\n\n\n\n    if (elapsed < duration) {\n      requestAnimationFrame(animate);\n\n      if (typeof step === \"function\") {\n\n      }\n    } else {\n      if (typeof onFinish === \"function\") onFinish();\n    }\n  };\n\n  useEffect(() => {\n    requestAnimationFrame(animate);\n  }, []);\n};\n\nexport default useCountDown;\n"],"mappings":";;AAAA,SAAgBA,MAAhB,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAmD,OAAnD;;AAGA,MAAMC,YAAY,GAAG,CACnBC,QADmB,EAEnBC,IAFmB,EAGnBC,QAHmB,KAIhB;EAAA;;EACH,MAAMC,QAAQ,GAAGP,MAAM,EAAvB;EACA,MAAMQ,UAAU,GAAGR,MAAM,CAAS,IAAT,CAAzB;EACA,MAAM,CAACS,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAASE,QAAT,CAApC;;EAEA,MAAMO,KAAK,GAAG,MAAM;IAClB,IAAIH,UAAU,CAACI,OAAf,EAAwB;MACtBC,oBAAoB,CAACL,UAAU,CAACI,OAAZ,CAApB;IACD;;IACDJ,UAAU,CAACI,OAAX,GAAqBE,qBAAqB,CAACC,OAAD,CAA1C;EACD,CALD;;EAOA,MAAMA,OAAO,GAAIC,IAAD,IAAkB;IAChC,IAAIT,QAAQ,CAACK,OAAT,KAAqBK,SAAzB,EAAoCV,QAAQ,CAACK,OAAT,GAAmBI,IAAnB;IACpC,MAAME,OAAO,GAAGF,IAAI,GAAGT,QAAQ,CAACK,OAAhC;;IAIA,IAAIM,OAAO,GAAGd,QAAd,EAAwB;MACtBU,qBAAqB,CAACC,OAAD,CAArB;;MAEA,IAAI,OAAOV,IAAP,KAAgB,UAApB,EAAgC,CAE/B;IACF,CAND,MAMO;MACL,IAAI,OAAOC,QAAP,KAAoB,UAAxB,EAAoCA,QAAQ;IAC7C;EACF,CAfD;;EAiBAL,SAAS,CAAC,MAAM;IACda,qBAAqB,CAACC,OAAD,CAArB;EACD,CAFQ,EAEN,EAFM,CAAT;AAGD,CApCD;;GAAMZ,Y;;AAsCN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}